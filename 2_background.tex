\chapter{Background}

%\hl{rework this}\\
%The popularity of batteryless designs in the research community has increased over the past decade. This popularity has resulted in a focus on improving the design of these systems to mitigate their drawbacks.
%The end goal of batteryless researchers is to create a design pattern that can be reused for general-purpose applications, resulting in a fixation on design, without sufficient grounding in real applications~\cite{hester2017future}. The reality is that the batteryless archetype will never be able to provide a general purpose solution for reliable and consistent sensing, and is only appropriate for niche applications.
%This chapter explores the landscape of wireless sensor power supply design and applications,
%identifying several overarching design archetypes and
%grounding the design process through an application-focused lens.
%By abandoning previous assumptions
%%about the necessity of the batteryless archetype,
%and starting with a blank slate and a holistic view of available technology and application requirements, we can return to application-focused power supply design to create simpler, long-lived, and reliable solutions.
%%This chapter defines common wireless sensor power supply design archetypes, and situates these archetypes within a deconstructed view of the application landscape.

\section{Batteryless Sensing}

The batteryless, or intermittent, wireless sensor movement has abandoned batteries (both rechargeable and non-rechargeable) under the assumption that current battery technology has too many detracting qualities to be suitable for energy-harvesting wireless sensor storage.
Most notably, they assume that batteries provide insufficient lifetimes to build long-lasting deployments~\cite{hesterNew17, hesterTragedy15, hesterFlicker17, hesterTimely17, hester2017future, colinReconfigurable18, luciaIntermittent17, yervaGrafting12, majid2020continuous}.
Batteryless systems instead utilize capacitors, which are long lasting, but provide very little energy storage when compared to batteries. Ceramic and tantalum capacitors possess functionally infinite lifetimes, while supercapacitors offer lifetimes on the order of decades to a century~\cite{kemetLife}.
The batteryless design decision results in two major limitations: batteryless systems are only as reliable as their energy income, and the amount of work they can do in one charge cycle is limited by the amount of energy stored their capacitors.

With capacitor storage,
a batteryless system can technically perform the operations of a wireless sensor. However, it does not mean it does them well.
Often a batteryless system's source of energy is intermittent, resulting in a system that operates intermittently.
In situations of energy drought, batteryless systems quickly deplete their
small energy stores, and lacking any future energy,
they power off and lose
state, potentially in the middle of an important operation or for an extended and unknown period of time.

When these systems are harvesting enough power to turn on and do work, they can only perform operations that require less energy than their capacitor storage can hold. Due to this, the general rule of thumb is that the capacitance is sized to hold enough energy to support the most energy intensive atomic task of the system, such as operating a sensor, performing some quanta of computation, or transmitting a single radio packet~\cite{nardello2019camaroptera,colinReconfigurable18, shukla2019skinnypower, hesterFlicker17}.
The intermittent reality of many harvesting sources necessitates extremely careful management of energy and complex software control of volatile state to ensure that \textit{any} forward progress can be made.

Much of the past work on batteryless systems has been focused on developing software solutions to enable forward progress between reboots. This extends the capability of applications beyond that of a single capacitor buffer discharge cycle, and is useful for building more general systems.
Batteryless devices are also extremely difficult to debug and develop software for, as in addition to software bugs, energy is no longer guaranteed at any point during execution.
To this end, researchers have also built tools to recreate energy conditions to help diagnose and fix intermittent energy bugs.
%Platform builders have also experimented with novel hardware techniques to increase responsiveness by reducing charging hysteresis.
Often, batteryless device operation is tied to a full swing capacitor charge/discharge hysteresis. Once they capture enough energy, they begin executing their workload until they have exhausted their stored energy. Researchers have worked on building hardware solutions that maximize individual component uptime, as well as methods for dynamically tuning capacitance to meet operation energy requirements.
%The software solutions presented by batteryless researchers are solutions developed for self-imposed problems stemming from limited energy storage, and hardware solutions offer marginal improvements to system responsiveness at a prohibitive cost.
The next sections discuss various system designs, tools, and software and hardware techniques meant to improve batteryless system generality, usability, and availability.
%Energy-harvesting systems that rely
%on small (super)capacitor energy buffers are commonly referred to as intermittent systems, as they only store enough energy to perform single atomic tasks, and are unable to operate when external energy is not present.
%Many choose to employ
%capacitors as an energy buffer due to their theoretically infinite lifetime,
%but are limited to small energy capacities, and are only as reliable and
%lively as their source of harvested energy.
%In situations of energy drought,
%these platforms quickly deplete their
%small energy stores, and lacking energy,
%they power off and lose
%state, potentially in the middle of an important operation or for an extended period of time.
%Due to this reality, researchers have spent the past decade
%designing more predictable and usable batteryless systems. This has resulted in several different hardware and software design methods and techniques for intermittent systems.

\subsection{One-shot Intermittency}
One of the simplest methods employed by batteryless systems does not bother to attempt to retain state across power loss and reboots
and instead just allocates enough capacitance to turn on and perform a predefined task, like sending a packet.
This method is reminiscent of the simple reply behavior of RFID tags, upon which the design of early intermittent systems is based on~\cite{sample2008design}.
These systems may act as a simple beacon~\cite{campbell2016cinamin,saoda2019no}, or a sensor~\cite{yervaGrafting12, debruin2013monjolo, campbellEnergy14, campbellThermes14}.
For some platforms, most notably the Monjolo family of devices, the rate of harvesting is used as the sensor itself. Every wake-up and transmit event corresponds to an amount of energy harvested, and can be used to quantify the harvested phenomenon~\cite{campbellThermes14, campbellEnergy14, debruin2013monjolo}.
This method of coupling harvesting and sensing is the only way to ensure that interesting sensor data is observed by a batteryless sensor.
Otherwise, when a batteryless sensor is built to sense a phenomena other than what it is harvesting, it is inevitable that the majority of instances, changes in the sensed phenomena will be missed because the sensor is offline.
However, even when sensing and harvesting is coupled, a one-shot batteryless design often does not have the energy required to support message retransmission in the case of packet loss, or caching in the event of poor network availability. Any observation may be lost upon packet failure, and the next time the sensor wakes up it only has enough energy to be concerned with transmitting its current, more recent observation.
This one-shot method is relatively simple compared to other approaches to batteryless software, but it still requires tedious cold-start software optimization and capacitance tuning to allow the device to power on and complete its workload within the constraints of its tiny energy storage.
This severely limits the generality of systems developed with this approach.
Performing any sensing or computing outside of the hardware's intended use case is often not possible.
Like all batteryless sensors, it is also impossible to distinguish between sensor failure and a lack of energy.

\subsection{State Preservation and Programming}
The workloads that are possible within the energy envelope of a single discharge cycle of capacitor or supercapacitor buffer are extremely limited.
Applications and devices that employ a one-shot technique are generally only able to perform a few seconds or less of computation, or send a single packet before powering off.
Since the development of the WISP platform~\cite{sample2008design}, researchers have continuously developed software and compiler tools and techniques to save state and resume operation across power outages, allowing for longer running computation or transmitting more data than a single capacitor bank would support.
Researchers have also developed tools and techniques for improving the programmming and debugging experience for batteryless programmers. Writing programs for intermittent operation introduces bugs that do not exist with continuous operation, and requires more advanced debugging techniques to address them.

\subsubsection{Checkpointing}
One method of enabling forward progress is checkpointing,
where important volatile state is saved at predetermined and run time locations in code before a power outage, and restored upon rebooting. Many methods have been proposed, using both static and dynamic methods.
Mementos~\cite{ransford2012mementos} utilizes a modified LLVM compiler, as well as a run-time library, to automatically place checkpointing triggers within a program. During run-time, at these trigger points, Mementos measures the system voltage, and if low enough, portions of volatile RAM state are written into non-volatile flash before turning off.
The introduction of new non-volatile technologies like Ferroelectric RAM (FRAM) allows more energy and time efficient checkpointing, while simultaneously simplifying the state preservation logic.
Hibernus~\cite{balsamo2014hibernus} does not use predefined trigger points, and instead utilizes a hardware interrupt to detect a low system voltage threshold, and immediately copies volatile state to FRAM. This state is subsequently restored on a rising voltage interrupt.

\subsubsection{Batteryless Debugging}
For batteryless systems, it
is very difficult to properly and correctly develop software, especially when non-volatile memory like FRAM is involved.
One-shot system software is difficult to tune and optimize to complete all within the energy provided by capacitor storage.
For checkpointing systems, if checkpoints are improperly placed such that atomic blocks are not completed entirely before power loss, and yet their partial state is recorded in non-volatile memory,
it can result in inconsistencies between volatile and non-volatile state.
Software development and debugging for batteryless systems must also consider energy state in addition to normal embedded software bugs.
To this end, researchers have developed hardware-software debugging tools that emulate and replay energy state based on energy trace captures.
Ekho is an energy emulator that recreates and repeats energy harvesting conditions for low power energy harvesting devices~\cite{hester2014ekho}.
Another tool, the energy-interference-free debugger (EDB), also replays energy state, specifically for intermittent systems~\cite{colin2016energy}.
EDB augments normal interactive debugging tools like GDB to allow real time playback of energy state, in addition to interactive program debugging.

\subsubsection{Checkpointing-free}
While conceptually simple, checkpointing is not a perfect solution to saving state, especially as that state begins to increase in footprint as applications increase in capability and complexity. There is an upper bound to the size of volatile state, where the energy required to save and read state to and from non-volatile memory exceeds that of various capacitor storage sizes.
The advent of FRAM (as well as other non-volatile RAM technologies) results in methods that can avoid explicitly saving and reading back the majority of application state. State that would normally reside in volatile RAM can now be placed within non-volatile FRAM, allowing this state to persist across power outages.
While this seems like a straightforward solution to preserving state, it is complicated by the shrinking
boundary between volatile and non-volatile state. Often both SRAM and FRAM are memory mapped and accessed the same way. Writes and reads to either are indistinguishable to the programmer and compiler.
Code is often executed multiple times through the course of intermittent execution, and if volatile and non-volatile state are not carefully managed and accessed, re-execution of various code sections can result in consistency violations~\cite{maeng2017alpaca}.

The aftermentioned debugging tools can help to detect and fix intermittency bugs during runtime testing. However, many researchers have developed solutions to avoid these bugs by design.
Task-based programming frameworks and models like
Chain~\cite{colin2016chain}, Alpaca~\cite{maeng2017alpaca}, Mayfly, and InK, all attempt to ensure forward progress and prevent intermittent consistency bugs.
The task model splits a software application into idempotent code blocks that read inputs from other tasks, and upon completion write their own results to channels of non-volatile memory.
While they ensure safety and improve performance over checkpointing-based approaches, Alpaca and Chain are not optimized for timeliness or event-based processing, two qualities that are important for wireless sensing, but very difficult to impossible to achieve with batteryless sensing.
Mayfly and InK

%Beyond safety concerns, through the course of many power failures and reboots, an in-progress task or computation may no longer be as useful and important as a newer one.
%In intermittent computation, it can be difficult to manage data priority with few guarantees about future energy availability. The Mayfly~\cite{hesterTimely17} programming language and runtime attempts to address this by explicitly pairing time with data to maximize data freshness within intermittent execution.
These techniques necessarily limit programming scope to ensure various constraints and guarantees of safety and forward progress and availability.
These techniques also introduce significant software and compiler complexity on top of an already complex embedded software development toolchain.
These constrained programming models require programmers to learn and adopt new programming models that incorporate unique concepts like tasks, channels, and flows~\cite{colin2016chain,maeng2017alpaca,hesterTimely17}.
While complex, these techniques are effective in that they enable safe forward progress across reboots and intermittent operation is almost entirely hidden from the programmer.
While often these sorts of software abstractions of hardware realities are beneficial, this has misled many system designers regarding the reliability and eventual success of batteryless systems for many applications.
An abstraction that guarantees forward progress removes the requirement for a programmer to
reason about what it means to build applications on top of systems that inconsistently operate.
The eventual forward progress allowed by these techniques inflates the perceived utility of these systems,
as they suggest continuous and eventual operation and progress. In reality, they operate with no guarantee of reliability or even eventual task completion.
This results in systems that technically function in the sense that they occasionally perform a task if energy is available, but their overall performance and reliability is unpredictable and varies widely.
No amount of software techniques and improvements will address the unreliability of batteryless systems, as it is a fundamental result of a design with insufficient energy storage to support continuous and reliable operation.
%These software techniques essentially provide an abstraction for programmers that allows the successful programming and usage of batteryless systems, without concerning themselves with the reality of batteryless operation. This as well as any quantifiable metrics of the actual performance of the system.
%they are left with the assumption that a batteryless system is an appropriate solution to most, if not any and all applications.
%By hiding this reality from programmers and application designers, it makes it more difficult to properly design systems that fulfill the requirements of real applications.

\subsection{Hardware Hysteresis Management}
Beyond software techniques to improve the intermittent programming experience,
researchers have also developed novel hardware designs to
increase the availability and responsiveness of batteryless systems. These hardware techniques focus on the fine-grained management
of capacitor charging hysteresis.
%Unlike the relatively stable voltage provided by a battery, a capacitor's voltage is related to the square root of stored energy. This means that during a discharge cycle, an intermittent system will experience a pronounced voltage drop from a maximum $V_{max}$ to a minimum $V_{min}$.
Batteryless systems operate within the bounds of capacitor storage voltage thresholds, which varies directly with regards to the energy stored in them. The
%For batteryless systems,
%it is often assumed that the
upper hysteresis threshold $V_{max}$, the point at which the device turns on during charging, is the voltage at which a capacitor is full, and the lower threshold $V_{min}$, the point at which the system turns off, is the minimum
operating voltage of the components in the system.
Smaller capacitors can charge to an upper
threshold and turn on faster, but store less energy.  Larger capacitors store more energy, but charge slower.
Hysteresis management
techniques attempt to combine different sized capacitors to
optimize the charging time and available energy for specific tasks.
Managing hysteresis also allows for more platform generality, as the capacitor storage can be optimized for various operations and workloads.
Notable examples of platforms that utilize this technique are the Flicker and Capybara platforms~\cite{hesterFlicker17, colinReconfigurable18}.

The Flicker
platform is a modular batteryless platform, where each module (sensor, radio, microcontroller) has its own built in energy storage~\cite{hesterFlicker17}. This design point is known as federated energy storage, where each peripheral possesses its own energy storage that is tuned to the task
it is expected to perform~\cite{hesterTragedy15}. This has the
effect of allowing various components to charge their storage quickly and begin operating before other parts of the system turn on or are needed. This also
isolates power failure to independent components.
Federated storage provides only marginal improvements with regard to component availability and energy harvesting efficiency. A federated approach only provides an average increase of 6.7\% of microcontroller uptime (from 64.2\% to 70.9\%) and a 1.5\% increase for radio uptime (from 3.8\% to 5.24\%) over a single capacitor discharge cycle. Likewise, a federated approach provides at most a 10\% improvement in energy harvested over the capacitor charge/discharge cycle~\cite{hesterTragedy15}.
A federated approach incurs overhead involving additional hardware complexity in the form of voltage monitoring circuitry as well as more complex software to manage and make use of the additional voltage information. The additional hardware increases the size, cost, and energy overhead of the system.

The Capybara platform also manages capacitor voltage hysteresis to increase system responsiveness and reactivity. However instead of using federated capacitor storage, it utilizes a central capacitor bank that can be dynamically resized~\cite{colinReconfigurable18}.
This is a more flexible approach than federated energy, where each hardware peripheral is designed with a specific amount of capacitance to support a predetermined task.
Capybara can resize its capacitor bank on the fly to match the energy required by an arbitrary task. This results in the lowest possible cold start and capacitor recharge times to support a given operation.
Under controlled conditions with consistent harvestable power, Capybara's dynamic reconfiguration is able to detect 2-4x of events over a system with statically allocated capacitance. The response latency is also within 1.5x that of a continuously powered system.
To support this dynamic resizing, Capybara introduces an extremely complex power system design that occupies significant board area. The design includes five mixed capacitor and supercapacitor banks, four state-retaining switches for connecting the capacitor banks to the load and harvester, and a custom power distribution circuit to charge the configuration of connected capacitors.

These techniques are based on the assumption that a full swing capacitor hysteresis with full power downs are necessary and unavoidable. Batteryless systems are often not designed to support a low power sleep state with volatile state retention.
%This assumption is unique and common with batteryless systems, where uptime is severely limited by the system's active power and available energy storage.
%Energy must be micromanaged on the scale of milliseconds to seconds, which leaves very little slack to preallocate enough energy to enter and persist within a sleep state. Often, batteryless designs do not bother to optimize for a sleep state.
Sleeping is a difficult operation for any batteryless system, as it is difficult to proactively retain enough energy to enter and sustain a sleeping state, as the future availability of energy is uncertain.
Additionally, energy must be micromanaged on the scale of milliseconds to seconds.
The precision timing of entering sleep state at the correct capacitor voltage level is often not worth the engineering effort to implement when compared to allowing the system power off naturally.
Due to this, designs often do not bother to optimize for a low power sleep state, instead relying on powering off in situations with no harvestable energy.
For example, Capybara is by design an inefficient sleeper. Its power supply has a significant
"power overhead of the power system" that limits the effectiveness of
any low power state besides being completely off~\cite{colinReconfigurable18}.
The decision to design around constant reboots incurs significant cost in energy and time. Without significant software optimization, the initialization of a processor, radio, and other peripherals is an expensive operation. If capacitor storage is allowed to leak (over the course of hours without any harvestable energy) the voltage may drop to a point that a boost converter must cold start.
Cold start is also very expensive, as harvesting ICs and boost converters are optimized for steady state operation and not cold start efficiency.
For example, the TI BQ25505 boost charger~\cite{bq25505} is capable of operating at \textgreater90\% efficiency at voltages higher than 1.5\si{\volt}.
However, its worst case cold start efficiency is 5\%, and requires at least 600\si{\milli\volt} input and 400\si{\milli\watt} instantaneous power to exit cold start.
Over the course of operation, a batteryless system will experience many repeated cold starts, resulting in wasted energy and time on charging a capacitor to a working, steady state voltage.

%While the design decisions to manage and fine-tune hysteresis make sense in the intermittent context, the importance placed on cold start optimization is specific to the power efficiency and limited energy capacity of a batteryless design.

%However, in times of gratuitous harvestable energy, a batteryless system should be able to maintain a low power sleep state for a long time, and avoid incurring the cost of repeated cold-start.
%Despite this, most batteryless systems assume the necessity of a full-swing operation, and their design abolishes the possibility of sleeping.

These proposed hardware solutions suggest increased complexity to micro-manage hysteresis is justified for the reported marginal gains in reactivity and responsiveness.

%Due to this, most intermittent system designs opt to fully discharge energy storage on every operation instead of sleeping. Because of this, batteryless system designers must often focus on optimizing the cold start of their system.
%In practice, if a system has the ability to enter a low power sleep mode with state retention, it can avoid frequent cold start and control its energy usage by willfully entering these
%states.
%With this operating principle, the benefits of hardware hysteresis management are limited to reducing cold start time and are workload independent.
%We show that the energy captured
%by these systems and their subsequent availability
%could be substantially improved by using larger energy buffers.

%Simultaneously sensing and harvesting the same phenomenon is one of the most effective use cases of batteryless sensors, however being able to simultaneously sense and harvest is not always possible, and is generally limited to light, temperature differentials, vibration, and RF sources.

\subsubsection{Redundancy}

\subsubsection{Necessary Complexity}
The batteryless design point is a red herring in the effort to build long-lasting wireless sensors. The promise of a power system that can persist theoretically indefinitely is tantalizing, but the trade off in terms of energy storage results in too much design complexity to produce a realistic solution

The software and hardware landscape of batteryless systems is rife with complex solutions to address the many problems resulting from intermittent operation. All of these solutions are made irrelevant with more consistent and continuous operation, with traditional wireless sensor duty cycling.

These complex software and hardware solutions, while increasing usability and reactiveness of batteryless systems, has not led to widespread adoption by industry.
While a few companies are developing batteryless products, including EnOcean, Perpetua, and Everactive~\cite{enocean, perpetua, everactive}, the majority still employ non-rechargeable batteries.
%This is because existing intermittent work has not been able to address the singular problem for (super)capacitor-based energy
%harvesting systems: in the face of plentiful harvestable energy, they are not
%able to store the energy for later use (in times of energy drought).
%As a result, they must
%micro-optimize the little energy they have.
%In many applications, if these
%systems had sufficient capacity, they could capture a greater share of available energy, and simply adjust sensing rate and
%sleep periods to achieve energy-neutral operation.

Despite the vast amount of work on new software and hardware techniques to enable and improve the generality, availability, and usability of batteryless systems, these techniques are unable to address the fundamental limitation of the batteryless design point: limited energy capacity.
%Beyond
%Other work in this space attempts to cope with
%intermittency
%by
%developing tools and
%programming language primitives that allow %can perform
%complex and energy intensive tasks to execute despite limited energy storage.
%Intermittent-aware programming
%models and compilers enable checkpointing and progress latching over
%workloads that may require more energy than can be stored
%~\cite{lucia2015simpler, ransford2012mementos, hesterTimely17}.
%New debugging tools
%spanning both the hardware and software domains
%measure the energy required for specific code operations
%and restore energy state during code breakpoints~\cite{colin2016energy}.


\section{Application Space}
Over the past two decades, researchers have developed numerous examples of effective and useful applications using wireless sensors.
As technological improvements in sensing, processing, and connectivity capability and efficiency increases, wireless sensors provide a large opportunity for autonomous, low or zero-maintenance sensing in many different sectors, including commercial, industrial, and personal sensing.
Attempting to fully enumerate and identify all of existing applications as well as future opportunities is untenable.
Instead, this section seeks to identify common wireless sensor application requirements and identify their impact on power supply design.

While the popularity and excitement around energy harvesting and batteryless sensing has led to progressively better batteryless systems, the focus on batteryless design has ignored the requirements of real world applications, and the limitations of the batteryless archetype.
Constraints like sensor size, lifetime, the availability of harvestable energy, and the reliability and consisistency of an application should all contribute to the end design of a wireless sensor, and many applications will have requirements that make a batteryless design an unsuitable choice.
Instead of starting with the assumption that a design must be batteryless, a design should start from application requirements. Given an application, a set of questions should be asked to define its requirements and better define design parameters.
While not an exhaustive list, an appropriate set of questions to help define the power supply requirements should resemble the following:

\begin{enumerate}
    \item What are the average power requirements for the application?
    \item How much harvestable power is available?
    \item What is the maximum atomic energy quanta required by the application?
    \item What area and volume is available for energy harvesting and energy storage?
    \item What is the application lifetime requirement?
    \item Does the application require reliable operation?
\end{enumerate}

\noindent In the following subsections, several example applications from prior work are presented and their requirements placed within the context of the above questions. In \cref{chap:intuition}, these questions form the basis of formalizing a set of high-level constraint equations to describe power supply design.
These constraints will help provide intuitive, application-based guidance for energy harvesting sensor design.

\subsection{Example Applications}
Based on the first requirement question, applications can be categorized by their average power requirements. The next few sections describe several wireless sensor applications, placing them within different power regimes. This includes applications that require Milliwatts of average power, ones that require Microwatts, and those that require Nanowatts.

\subsubsection{Milliwatt regime}
This regime consists of applications that subsist on Milliwatts of power. Often, these applications are examples of older work, with less efficient technology, as well as applications with large batteries, or ones that exist in environments with plenty of available harvestable energy, allowing relatively high average power requirements.

\subsubsection{Microwatt regime}
\subsubsection{Nanowatt regime}
\subsubsection{Static Monitoring}
\begin{enumerate}
    \item GDI ~\cite{mainwaring2002wireless}
    \item Redwoods ~\cite{tolle2005macroscope}
    \item Monjolo/Powerblade
    \item Signpost ~\cite{adkins2018signpost}
    \item Mithraeum ~\cite{afanasov2020battery}
    \item Cathode ~\cite{jagtap2021repurposing}
\end{enumerate}
\subsubsection{Wearable}
\subsubsection{Tracking and Localization}
\begin{enumerate}
    \item ZebraNet ~\cite{juang2002energy}
    \item SnapLoc ~\cite{grossiwindhager2019snaploc}
    \item SociTrack ~\cite{biri2020socitrack}
    \item Glitter ~\cite{sharma2020all}
\end{enumerate}
\subsubsection{Other?}

\subsection{Size}

\subsection{Power}

\subsection{Harvesting Potential}

\subsection{Atomicity}

\subsection{Lifetime}

\subsection{Reliability}





\section{Power Supply Design Archetypes}

All wireless sensors require electrical energy to function.
That energy must either be allocated prior to deployment, or provided or collected during deployment.
The archetypes presented in \cref{fig:background:archetypes} represent the high-level architectural possibilities for storing energy and powering wireless sensors.
Energy storage and harvesting technology is rapidly improving, and varied application requirements will result in different design parameters. Despite this, the power supplies for all wireless sensors can be divided into clearly delineated design patterns.
Most simply, energy can be provisioned in a finite energy storage like a battery, also known as a primary cell. In situations where there is harvestable energy, it can be captured and stored in rechargeable storage, or a secondary cell.
If the available harvestable energy is on or below the edge of being sufficient to fully power a sensor and its workload, harvesting can be paired with a backup primary source to ensure consistent, reliable operation with an extended lifetime.
These three classes of design archetypes encompass the options for wireless sensor power supplies, if not for all electronic devices.
The next few sections explore the gradient of design space in more detail, and identify existing systems and their place within the design space.

\subsection{Primary-only}
Non-rechargeable (primary-cell) batteries have been the preferred
method of powering sensors for both academic experimentation
and commercial and industrial applications.
The Telos family of motes, originally designed in 2004~\cite{polastre2005telos},
is still the wireless platform of choice for some modern research projects~\cite{mohammad2018codecast,li2019privacy}.
The Hamilton mote is an example of an attempt to provide a more modern, cost-effective alternative to older motes~\cite{andersen2017hamilton}.
Besides research platforms, the majority of commercial smart home sensors, like those offered by Ecobee, Honeywell, Lutron, Nest, Phillips, among many others, all opt to use non-rechargeable batteries as their source of energy
~\cite{ecobeeSensor, honeywellThermostat, lutronSolutions, googleNestTemperature, hueSensor}.
Industrial offerings from Emerson, GE, Honeywell, and others also utilize non-rechargeable power cells in their reliable wireless sensors~\cite{emersonRosemount,GEInsightMesh,honeywellOneWireless}.
The use of primary-cells is popular in commercial and industrial sensing because they enable sensors with predictable lifetimes that are easy to
design, simple to program, and reliable to operate.
A finite energy storage provides a finite lifetime, meaning battery replacement is inevitable. However, advances in energy efficiency and battery technology have resulted in reliable sensors that can last up to 10 years without battery maintenance~\cite{emersonRosemount,honeywellOneWireless, lutronSolutions}.

\subsection{Energy Capture with Buffer}
%Prior work regarding energy-harvesting sensor systems can be broadly
%divided into two categories: those which make use of intermittent computing
%techniques and those which do not.
%Intermittent systems often exist in a regime of unreliable and ultra low harvester power, where
%operation and uptime are not guaranteed. As such, they often lose power and
%reboot while intermittently working through a sensing task.
%A wealth of work has been devoted to
%making these systems usable and reliable.
%Other energy-harvesting systems, especially those deployed outside, have access
%to significantly more harvestable energy and are able to store more of this energy
%for later use, so they
%do not use intermittent computing techniques to complete their workloads.

Instead of preallocating energy, a system can utilize external sources of energy.
The quantity, and consistency of external energy can vary widely. If the energy is predictable or reliable, a system can be powered entirely from the external source. If the source is unpredictable, captured energy can be stored or buffered in rechargeable storage, generally a (super)capacitor or battery to use in times where external energy is unavailable.

At one extreme of power delivery, a wireless sensor can be powered by a reliable source, like wired power.
As much as it seems like an antithesis to "wireless" sensors, wired power is a solution for a class of applications where using a battery is more costly than installing wired power.
This is especially true for applications that are monitoring powered devices or measuring mains power.
For example, the Powerblade power meter is connected to AC mains power for both measurement and power supply~\cite{debruin15powerblade}.
Its proximity to readily available AC power and its small form factor make the inclusion of a battery infeasible compared to scavenging off mains power.

The majority of wireless sensors that depend on external sources of energy are energy-harvesting. They utilize
%e, energy harvesting that is utilized in environments with sparse and inconsistent energy results in extremely low power designs, and designs that operate intermittently.
photovoltaic, thermoelectric, piezoelectric, ambient RF harvesting or other methods to scavenge energy from their environment.
This results in limited and unreliable energy income.
Parameters like harvester size or surface area, and harvesting method, impact the amount of potential power delivered to the sensor, while the size and capacity of the rechargeable storage determines how much energy can be buffered.
This device class can be further differentiated by how captured energy is stored. Intermittent, or batteryless systems, eschew both non-rechargeable and rechargeable batteries and utilize capacitors and supercapacitors for energy buffering. The choice of a (super)capacitor buffer significantly limits the amount of energy capacity available to the system, reducing its capability to cache energy in times of drought. This choice is predicated on the assumption that rechargeable batteries are less suitable for energy harvesting applications. However, most energy harvesting systems, particularly those that utilize outdoor photovoltaic harvesting, utilize rechargeable batteries.


\subsubsection{Non-intermittent Sensors}
\label{sec:related:nonintermittent}
Non-intermittent energy-harvesting sensors
have largely existed in environments with plentiful harvestable energy
and have been designed with sufficient capacity to capture this energy.
%Some
%devices have also embraced backup primary-cells to further ensure
%reliable operation.
%In the middle, in environments with sufficient and predictable available energy, designs can scavenge energy and store it in a rechargeable battery to power their workload.
Most examples of such devices are deployed outdoors with photovoltaics~\cite{jiang2005perpetual, kansal2007power, corke2007long, lin2005heliomote, adkins2018signpost}.
%Energy harvesting in industrial environments is also possible with sufficient heat differential or vibrational sources~\cite{perpetua, kinergizer}.
%However, the adoption and application of such harvesting methods is limited and non-rechargeable batteries remain the most popular option for powering industrial sensors.
%Notably, Prometheus utilizes a supercapacitor as a short term energy store, and when full,
%charges a backup rechargeable lithium battery~\cite{jiang2005perpetual}. At
%the time of its design, lithium cells offered highly limited recharge cycles,
%and by utilizing a supercapacitor, much of this
%charge-discharge volatility was masked from the secondary-cell, extending its lifetime.
Non-intermittent sensors have also been employed indoors.
The EnHANTs sensor uses an indoor photovoltaic panel to charge an intentionally oversized NiMH
battery, with plans to eventually use a thin-film battery~\cite{margolies2015energy}.
DoubleDip utilizes thermoelectric harvesting to charge a lithium-manganese battery~\cite{martin2012doubledip}
These examples are of older designs, using older battery technology that had limited cycle lifetimes. However, the greater energy capacity provided by batteries allows these designs to avoid the complications of intermittency and batteryless operation.
The popularity of batteryless systems has led to a distinct lack of modern research systems that utilize rechargeable batteries, especially those that are not outdoors.

%DoubleDip notes that supercapacitors offer
%lower energy density and higher leakage when compared to batteries, but admits
%that the lithium-manganese chemistry suffers from low maximum output currents
%and a limited number of charge-discharge cycles.
%While the limitations of past batteries have slowed their adoption in
%low energy-harvesting scenarios, we claim that recent developments in battery
%technology will enable higher capacity energy storage without these trade offs.


\subsection{Energy Capture with Buffer and Primary}

Regardless of which energy store is used, energy-harvesting systems will
experience some degree of uncertainty regarding energy income.
A non-rechargeable
backup energy store can be utilized to mask this uncertainty, cold
start electrical components, and provide consistent, reliable, and lively operation.
A third design archetype is a combination of the first two:
external energy capture paired with a backup non-rechargeable cell.
While this archetype makes sense from the perspective of maximizing system lifetime and reliability, it is not commonly employed.
The Pressac line of supercapacitor-based energy-harvesting sensors
use a battery backup to obtain an estimated 10 years of continuous, reliable operation~\cite{pressac}.
%This work suggests that these sensors could significantly
%increase their lifetime by using a larger secondary energy store.
There has been little
exploration on the benefits of this hybrid design and the use of
primary-cells to avoid intermittency,
and provide baseline reliability. This dissertation seeks to explore this design point in more detail.




